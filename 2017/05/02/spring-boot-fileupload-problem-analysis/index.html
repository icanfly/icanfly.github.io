<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="侠客行舟|技术博客|Java|分布式|架构|大数据"><title>SpringBoot文件上传解析 | LP's Notes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">SpringBoot文件上传解析</h1><a id="logo" href="/.">LP's Notes</a><p class="description">侠客行舟 不进则退</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">SpringBoot文件上传解析</h1><div class="post-meta">May 2, 2017<span> | </span><span class="category"><a href="/categories/原创文章/">原创文章</a></span></div><div class="post-content"><p>在以往的开发过程中，Spring体系的文件上传一直使用的是commons-fileupload，在我们的项目中也是一样的，这两天在做公司的大数据查询平台，其中在做大文件上传时遇到了一些问题，记录如下：</p>
<h1 id="问题现象"><a href="#问题现象" class="headerlink" title="问题现象"></a>问题现象</h1><p>在开发环境、测试环境中，我们的环境是直接部署的jetty，也就是所有的访问直接经由浏览器后到达jetty服务器，运行良好。</p>
<p>但是当程序上到预发布环境时，文件上传出现了问题，文件上传不成功。服务器返回了一个错误，大体意思就是文件上传的请求体大于服务器端的最大设置，从响应的header看是nginx响应回来的，初步定位到是nginx文件大小上传受限，运维帮助修改了nginx配置后，这个错误不再出现。然而又出现了新的问题，Java程序在上传文件的过程中内存溢出了！</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/jetty.jpeg" title="[Jetty内存溢出]">
<p>都知道在springmvc中，上传文件的话如果太大会写入临时磁盘文件来避免内存溢出的问题。当然我们的程序中也设置了：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/应用配置1.png" title="[应用配置]">
<p>以上的配置信息的解析是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件上传的最大大小为256M</span><br><span class="line">HTTP请求的最大大小为257M，因为HTTP请求包含了文件上传，故要大于文件上传大小。</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h1><p>一直以为该配置是commons-fileupload的组件的配置，但是从报错的信息来看，似乎并没有写入到文件中，而是不断地在内存中写入堆积，导致内存不断被占用导致最终的内存溢出。</p>
<p>而且从报错的地方看是调用了jetty的Multipart的解析器，而并没有看到有使用到commons-fileupload的文件上传解析，出于解决问题的必要，我在项目中强行依赖了jetty的包，然后在IDE中打开了内存溢出部位的源码：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/jetty-multipart-write.png" title="[Jetty处理文件上传]">
<p>上图中write方法负责文件上传请求解析过程中数据的管道写入，这个方法的大体意思是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果设置了最大的文件上传大小，并且读取的实际大小大于了最大限制，则抛出异常</span><br><span class="line">如果设置了文件上传大小因子fileSizeThreshold(大于0),并且读取的实际大小大于fileSizeThreshold，并且文件为空，那么就初始化一个文件。</span><br></pre></td></tr></table></figure></p>
<p>比较吸引人的是有一个“createFile”函数的调用，我在整个类中找了一遍，发现有几个地方有调用：</p>
<p>在parse方法中有创建MultiPart类的调用：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/multipart-create.png" title="[MultipartInputStreamParser.parse方法]">
<p>以及MultiPart内部类的open方法：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/multipart-open.png" title="[MultiPart.open方法]">
<p>isWriteFilesWithFilenames() 是一个属性值判断，在MultiPartInputStreamParser类的初始化过程中并没有对此进行设值，故可以判断该处返回false，反推可以知道在这里并没有调用createFile()这个函数。<br>同时对_out对象进行了初始化，默认是初始化为一个ByteArrayOutputStream2的内存缓冲。</p>
<p>那么调用createFile()这个函数的地方就只剩下write方法了。</p>
<p>我们再来看看createFile这个方法的实现：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/multipart-createfile.png" title="[MultipartInputStreamParser.createFile方法]">
<p>在这里方法里面，对parser的_file文件对象进行了初始化，同时该该文件包装了带缓冲的输出流bos对象，如果之前有在_out中的缓冲数据，则将缓冲数据写入到bos对象中，最后，最关键的一步：将_out对象原有的引用替换为bos对象，即将输出流指向了文件输出。</p>
<h1 id="柳暗花明"><a href="#柳暗花明" class="headerlink" title="柳暗花明"></a>柳暗花明</h1><p>到这里，整个文件上传的线条都非常明显了：</p>
<p><b><br>1、Jetty检测到文件上传标识时(multipart)，实例化MultiPartInputStreamParser，并调用parse方法进行解析。<br>2、parse方法进行一系列的逻辑处理，并初始化MultiPart，调用MultiPart对象的open方法，open方法先将_out输出流先初始化为内存缓冲流。<br>3、parse方法完成一系列初始化后，进行上传数据读取，并调用MultiPart对象的写入方法write，并在write方法中进行了逻辑判断与处理：当内存缓冲达到最大值时，改为写入文件的方式（防止内存占用过大）<br></b></p>
<p>那么现在最大的问题是内存溢出了，那么最大的可能性就是write的时候并没有引导进入createFile这个调用，而是一直在向内存缓冲中写入数据，导致的内存溢出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (MultiPartInputStreamParser.this._config.getFileSizeThreshold() &gt; 0 &amp;&amp; _size + length &gt; MultiPartInputStreamParser.this._config.getFileSizeThreshold() &amp;&amp; _file==null)</span><br></pre></td></tr></table></figure>
<p>这个条件中唯一的可能性就是MultipartConfig中并没有对fileSizeThreshold进行设值。</p>
<p>到此问题已经浮现，那么现实中就是要找到jetty的配置，并进行设值处理。这个值的配置我其实找了好久，包括翻看了jetty的etc目录下的所有文件。</p>
<p>最后发现，其实这是Servlet 3.0的文件上传规范：<a href="http://www.blogjava.net/yongboy/archive/2011/01/15/346202.html" target="_blank" rel="noopener">http://www.blogjava.net/yongboy/archive/2011/01/15/346202.html</a></p>
<p>应用进行设置后，所有符合Servlet 3.0规范的WEB服务器会自动加载这个配置。但是我想Jetty中应该也是可以配置的，具体的细节就没有去考究了。</p>
<h1 id="锦上添花"><a href="#锦上添花" class="headerlink" title="锦上添花"></a>锦上添花</h1><p>而springboot是直接支持修改这个参数的：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/应用配置.png" title="[应用配置]">
<h1 id="峰回路转"><a href="#峰回路转" class="headerlink" title="峰回路转"></a>峰回路转</h1><p>我翻看了springboot的文档时，文档上的错误注释误导了我：</p>
<img src="/2017/05/02/spring-boot-fileupload-problem-analysis/springboot文档.png" title="[springboot文档]">
<p>上图红圈中的文字表述： file-size-threshold指明了上传内容会被写入到文件中的最大因子，默认为0，这表示上传内容会被立即写入到磁盘文件中。</p>
<p>我之前的配置中并没有配置file-size-threshold，然而默认值可以认为是都是写入文件。这并不符合我现在看到的现象，最后在我怀疑的精神下，我试着将该配置修改为file-size-threshold=1MB后，发到预发布环境验证，居然一切OK了。</p>
<p>也由此反证官方代码注释文档存在错误引导，并且实际上的Jetty代码中也体现了当设置为0时并不会创建文件，而一直写入内存缓冲导致内存溢出的问题。</p>
<p>为此我也给官方提交了一个<a href="https://github.com/spring-projects/spring-boot/issues/9073" target="_blank" rel="noopener">issue</a>，等待官方的答复。</p>
<p><hr>20170504 更新<br>官方回复了，确实存在这样的问题：</p>
<blockquote>
<p>This is somewhat complicated as the behaviour with a value of zero varies by container:</p>
<p>Tomcat will write to disk immediately<br>Jetty will never write to disk<br>Undertow ignores the file size threshold entirely<br>So the javadoc is right if you’re using Tomcat, but wrong if you’re using Jetty or Undertow.</p>
</blockquote>
<p>所以也警示我们，虽然大厂的开源东西比较可靠，但是也要有怀疑精神！</p>
<p>还有值得一说的就是，我最初在使用springboot的时候，引入了commons-fileupload包，我一直以为springboot使用的是这个文件上传包，直到内存溢出错误发生时，我才发现这个包根本没有用到。而springboot使用到了的是web容器Servlet 3.0自带的文件上传解析。这个配置从springboot的配置项：spring.http.multipart.enabled（默认为true）可以设置开启或者关闭。在没有显式设置的情况下，这个选项是默认开启的，也就有了我上面的问题的出现。</p>
<h1 id="延伸思考"><a href="#延伸思考" class="headerlink" title="延伸思考"></a>延伸思考</h1><p>那么问题又来了，如何让springboot使用commons-fileupload组件进行文件上传呢。这里我就不多讲了，通过网上我已经搜索到了比较多的资料：</p>
<p>1、<a href="https://github.com/bobbylight/file-upload-example" target="_blank" rel="noopener">https://github.com/bobbylight/file-upload-example</a><br>2、<a href="http://stackoverflow.com/questions/32782026/springboot-large-streaming-file-upload-using-apache-commons-fileupload" target="_blank" rel="noopener">http://stackoverflow.com/questions/32782026/springboot-large-streaming-file-upload-using-apache-commons-fileupload</a></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>产生问题的原因很多，自己也有原因，妄自认为和springmvc的文件上传没有区别。归根到底还是对springboot的文档和机制不熟悉。对springboot的使用还没有太深入，这个有待加强。</p>
<h2 id="文件上传几大限制"><a href="#文件上传几大限制" class="headerlink" title="文件上传几大限制"></a>文件上传几大限制</h2><ul>
<li>负载均衡器（反向代理）限制： 一些负载均衡器或者反向代理服务器存在请求大小最大限制</li>
<li>应用服务器限制： 一些WEB应用服务器存在请求最大大小限制</li>
<li>应用程序限制： 应用程序中进行了上传大小限制</li>
</ul>
<h2 id="SpringBoot文件上传"><a href="#SpringBoot文件上传" class="headerlink" title="SpringBoot文件上传"></a>SpringBoot文件上传</h2><p>SpringBoot默认自己开启了Servlet3.0规范的文件上传，不再需要commons-fileupload等第三方文件上传包<br>同时配置项如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.http.enabled=true （默认为true）</span><br><span class="line">spring.http.multipart.max-request-size=     #这里设置最大请求大小，该大小必须大于max-file-size</span><br><span class="line">spring.http.multipart.max-file-size=        #这里设置最大的文件上传大小</span><br><span class="line">spring.http.multipart.file-size-threshold=  #这里设置当文件大小超过多大后，由内存缓冲改由写入磁盘文件</span><br></pre></td></tr></table></figure></p>
<h2 id="SpringBoot使用CommonsFileUpload"><a href="#SpringBoot使用CommonsFileUpload" class="headerlink" title="SpringBoot使用CommonsFileUpload"></a>SpringBoot使用CommonsFileUpload</h2><p>使用方式见文末所说。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.http.enabled=false</span><br></pre></td></tr></table></figure></p>
<p>并引入Commons Fileupload包，并进行相关初始化。</p>
<h2 id="关于怀疑精神"><a href="#关于怀疑精神" class="headerlink" title="关于怀疑精神"></a>关于怀疑精神</h2><p>任何时候都要对开源精神充满敬畏，同时少不了怀疑探索精神！</p>
</div><iframe src="/donate/?AliPayQR=/images/alipay.png&amp;WeChatQR=/images/wechat.png&amp;GitHub=null&amp;BTCQR=null&amp;BTCKEY=null&amp;PayPal=null" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:240px; width:100%;" frameborder="0" scrolling="no"></iframe><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://www.lpnote.com/2017/05/02/spring-boot-fileupload-problem-analysis/" data-id="cjs2ys7l70099azp5j8wvswvl" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACwklEQVR42u3awWojMRAEUP//T2chp0CccVX3yAnLm5NxvBo9LahFtR6P+Pn4fL5+/v7N979+/f6n0X4aMx/thgcPDw9vNPWfnuvf5LwTo12Pg4eHh3ealxSDpGxcF49rTD6HvOTg4eHh/S4vLyHJ1K8P03h4eHj/H6/d7jcLlJcTPDw8vHfyZtt9Hr/mjLww3Jy14OHh4cW8WQPsdz8f7+/h4eHhjbrq+bY+26zv/f2TEfDw8PAO8NorU/nBt53iJrZ4UTzw8PDwbuW1E22nvrnMej236JCNh4eHd4w3ay+1k0veO8O8KAx4eHh4t/LaK1az61Cz0CFvsEVLhoeHh3crr23At4FFG2HM2PXNCDw8PLwRbxa21qFAeREhWeKohODh4eEd4G0uV81a/i1+U8Dw8PDwzvHy9nxbJJIF2h/WV2EEHh4e3qJrnwQQ+7ghvyIwW/SoAYaHh4e34OWNrvbSQL26o6sDL2aFh4eHd4y3OVi3BSP/fT5OlFLj4eHhHeDtv8kXax8NR2EEHh4e3jFeGyVsGmD58b1tqj35jIeHh3eAl2z0+Qbdxhmz2Dd/Lx4eHt4JXhsT7CODTSzbHtPx8PDwTvDaQKG9VFpfjVqXpUf+Izw8PLwRLz/CtpNOrgjkBaYNRJ6k1Hh4eHi38vZx7axs3BVevAhw8fDw8G7l7V88O7/nx/G8kODh4eG9h5dHA23MOisSszcOb0bg4eHhjXhtpPsIniQOzo/yj/jBw8PDew/vo3xm7a58dfMD/fBIjYeHh7fmzbbdlpGXmbblVt+PwMPDw7uJlx95k806mfq9ZePF/xseHh7eMV6+TW8AedmYhRFP/i0eHh7eH+BtMHmrbIbHw8PD+2u8pAy0YcSmVRadn/Hw8PCO8fIwot3Qk829xddHajw8PLxbeZsbW8lw+aK05WQfYeDh4eGVvH/naw5iX4mWKwAAAABJRU5ErkJggg==">分享</a><div class="tags"><a href="/tags/问题解析/">问题解析</a><a href="/tags/参与开源/">参与开源</a><a href="/tags/SpringBoot/">SpringBoot</a><a href="/tags/Spring/">Spring</a></div><div class="post-nav"><a class="pre" href="/2017/05/04/hive-query-log-problem-analysis/">Hive获取查询日志的问题解析</a><a class="next" href="/2017/04/19/java-csv-encoding-problem/">java输出csv文件中文乱码的问题</a></div><div id="container"></div><link rel="stylesheet" href="/css/default.css?v=0.0.0"><script src="/js/gitment.browser.js?v=0.0.0"></script><script>var path = "2017/05/02/spring-boot-fileupload-problem-analysis/"
var paths = path.split("/")
var lastPathLen = paths[paths.length-1].length
var finalPath = paths[paths.length-1]
if(lastPathLen == 0) {
   finalPath = paths[paths.length-2]
}
var p = finalPath.length < 50 ? finalPath : finalPath.substring(0,49)
var gitment = new Gitment({
  id: p,
  owner: 'icanfly',
  repo: 'blog_comments',
  oauth: {
    client_id: '9d8f7a953f32b2942597',
    client_secret: 'efbc1217c60b17a9ceae6b2bbc6885dc17c51ac7',
  },
})
gitment.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.lpnote.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/原创文章/">原创文章</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/原创文章/问题记录/">问题记录</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/翻译文章/">翻译文章</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载文章/">转载文章</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/问题记录/">问题记录</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/问题解析/" style="font-size: 15px;">问题解析</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/apache/" style="font-size: 15px;">apache</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/fastjson/" style="font-size: 15px;">fastjson</a> <a href="/tags/ranger/" style="font-size: 15px;">ranger</a> <a href="/tags/hdfs/" style="font-size: 15px;">hdfs</a> <a href="/tags/大数据/" style="font-size: 15px;">大数据</a> <a href="/tags/最佳实践/" style="font-size: 15px;">最佳实践</a> <a href="/tags/hortonworks/" style="font-size: 15px;">hortonworks</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/groovy/" style="font-size: 15px;">groovy</a> <a href="/tags/正则表达式/" style="font-size: 15px;">正则表达式</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/配置中心/" style="font-size: 15px;">配置中心</a> <a href="/tags/DIY/" style="font-size: 15px;">DIY</a> <a href="/tags/HIVE/" style="font-size: 15px;">HIVE</a> <a href="/tags/搜索引擎/" style="font-size: 15px;">搜索引擎</a> <a href="/tags/lucene/" style="font-size: 15px;">lucene</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/IDE/" style="font-size: 15px;">IDE</a> <a href="/tags/IDEA/" style="font-size: 15px;">IDEA</a> <a href="/tags/json/" style="font-size: 15px;">json</a> <a href="/tags/jackson/" style="font-size: 15px;">jackson</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/源码解读/" style="font-size: 15px;">源码解读</a> <a href="/tags/基础问题/" style="font-size: 15px;">基础问题</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/centos/" style="font-size: 15px;">centos</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/ORM/" style="font-size: 15px;">ORM</a> <a href="/tags/负载均衡/" style="font-size: 15px;">负载均衡</a> <a href="/tags/guava/" style="font-size: 15px;">guava</a> <a href="/tags/踩坑/" style="font-size: 15px;">踩坑</a> <a href="/tags/session/" style="font-size: 15px;">session</a> <a href="/tags/druid/" style="font-size: 15px;">druid</a> <a href="/tags/rpm/" style="font-size: 15px;">rpm</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/jetty/" style="font-size: 15px;">jetty</a> <a href="/tags/gc/" style="font-size: 15px;">gc</a> <a href="/tags/presto/" style="font-size: 15px;">presto</a> <a href="/tags/OOM/" style="font-size: 15px;">OOM</a> <a href="/tags/GC/" style="font-size: 15px;">GC</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/版本控制/" style="font-size: 15px;">版本控制</a> <a href="/tags/VCS/" style="font-size: 15px;">VCS</a> <a href="/tags/分支管理/" style="font-size: 15px;">分支管理</a> <a href="/tags/virtualbox/" style="font-size: 15px;">virtualbox</a> <a href="/tags/ubuntu/" style="font-size: 15px;">ubuntu</a> <a href="/tags/timewheels/" style="font-size: 15px;">timewheels</a> <a href="/tags/timer/" style="font-size: 15px;">timer</a> <a href="/tags/yarn/" style="font-size: 15px;">yarn</a> <a href="/tags/SpringCloud/" style="font-size: 15px;">SpringCloud</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/metrics/" style="font-size: 15px;">metrics</a> <a href="/tags/ambari/" style="font-size: 15px;">ambari</a> <a href="/tags/参与开源/" style="font-size: 15px;">参与开源</a> <a href="/tags/timewheel/" style="font-size: 15px;">timewheel</a> <a href="/tags/skywalking/" style="font-size: 15px;">skywalking</a> <a href="/tags/apm/" style="font-size: 15px;">apm</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/tags/solr/" style="font-size: 15px;">solr</a> <a href="/tags/rocketmq/" style="font-size: 15px;">rocketmq</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a> <a href="/tags/问题分析/" style="font-size: 15px;">问题分析</a> <a href="/tags/github/" style="font-size: 15px;">github</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/02/13/ignore_above-in-elasticsearch/">Elasticsearch中ignore_above的作用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/02/java-concurrent-striped64/">java并发之Striped64解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/memory-leak-analysis-for-skywalking/">一次Skywalking内存泄露的原因分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/write-combining/">合并写(write combining)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/false-sharing/">伪共享(False Sharing)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/08/groovy-expr-usage/">groovy-expr-usage</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/08/jackson-ctrl-char-problem-resovle/">jackson-ctrl-char-problem-resovle</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/04/solve-a-disk-warning-illusion-caused-by-rocketmq/">solve-a-disk-warning-illusion-caused-by-rocketmq</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/30/hexoclient-usage/">hexoclient-usage</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/23/customize-instance-id-with-consul-service-registry/">定制springcloud服务注册到consul中的instanceId</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">LP's Notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo. </a><a rel="nofollow" target="_blank" href="https://coding.net">Hosted by Coding Pages.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>