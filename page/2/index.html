<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="侠客行舟|技术博客|Java|分布式|架构|大数据"><title>LP's Notes | 侠客行舟 不进则退</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">LP's Notes</h1><a id="logo" href="/.">LP's Notes</a><p class="description">侠客行舟 不进则退</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"><a href="/2018/11/23/java-dns-cache/">Java DNS缓存</a></h1><div class="post-meta">2018-11-23</div><div class="post-content"><h1 id="jdk1-5和1-5之前版本"><a href="#jdk1-5和1-5之前版本" class="headerlink" title="jdk1.5和1.5之前版本"></a>jdk1.5和1.5之前版本</h1><p>默认DNS缓存时间是永久缓存</p>
<h1 id="jdk-1-6以后"><a href="#jdk-1-6以后" class="headerlink" title="jdk 1.6以后"></a>jdk 1.6以后</h1><p>与security manager策略有关。</p></div><p class="readmore"><a href="/2018/11/23/java-dns-cache/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2018/10/23/delete-git-submodule/">delete-git-submodule</a></h1><div class="post-meta">2018-10-23</div><div class="post-content"><p>删除一个submodule</p>
<ol>
<li><p>删除 .gitsubmodule中对应submodule的条目</p>
</li>
<li><p>删除 .git/config 中对应submodule的条目</p></li></ol></div><p class="readmore"><a href="/2018/10/23/delete-git-submodule/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/12/06/accuracy-problems-between-java-and-javascript/">解决前端JS与后端数据交互长整型精度失真的问题</a></h1><div class="post-meta">2017-12-06</div><div class="post-content"><p>在项目中采用了twitter开源的snowflake算法的id生成器，生成的id是一个long型的大数，因数值太大，通过json形式传输到前端后，在js解析时，会丢失精度。</p></div><p class="readmore"><a href="/2017/12/06/accuracy-problems-between-java-and-javascript/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/11/15/apache-kafka-purgatory-hierarchical-timing-wheels/">Apache Kafka,Purgatory以及多级时间轮</a></h1><div class="post-meta">2017-11-15</div><div class="post-content"><p>原文地址：<a href="https://www.confluent.io/blog/apache-kafka-purgatory-hierarchical-timing-wheels/" target="_blank" rel="noopener">Apache Kafka, Purgatory, and Hierarchical Timing Wheels</a></p>
<p><img src="https://www.confluent.io/wp-content/uploads/2016/08/TimingWheels1.png" alt="Time Wheels"></p>
<p>Apache Kafka有一个称为“请求Purgatory”的数据结构。 这个数据结构会hold住任何尚未达到标准的成功，但又尚未造成错误的请求。 问题是：我们如何有效地跟踪群集中数以万计的的满足要求的异步请求？</p>
<p>Kafka实现了几个不能立即回应的延时请求类型。 例子：</p>
<ul>
<li><p>只有在所有同步副本已经确认写入之后，acks = all的产生请求才能被认为是完整的，并且如果领导失败，我们可以保证它不会丢失。</p>
</li>
<li><p>对于min.bytes = 1的提取请求只有在至少有1个byte的数据能够被消费者消费时才会被回答。 这允许“长时间轮询”，使得消费者不必忙于等待检查新数据到达。</p>
</li>
</ul>
<p>这些请求被认为是完成的：</p>
<p>（a）他们所要求的标准完成<br>（b）或者发生一些超时</p>
<p>时刻增长这些异步操作的数量与连接的数量成比例，对于Kafka来说，这往往是成千上万的连接数量。</p>
<p>请求Purgatory被设计用于如此大规模的请求处理，但是旧的实现有一些缺陷。</p>
<p>在这个博客中，我想解释一下旧执行的问题以及新实现如何解决这个问题。 我也将呈现基准测试结果。</p></div><p class="readmore"><a href="/2017/11/15/apache-kafka-purgatory-hierarchical-timing-wheels/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/11/15/hashed-and-hierarchical-timing-wheels/">基于Hash和多级时间轮：实现定时器的高效数据结构</a></h1><div class="post-meta">2017-11-15</div><div class="post-content"><p>原文地址：<a href="https://blog.acolyer.org/2015/11/23/hashed-and-hierarchical-timing-wheels/" target="_blank" rel="noopener">Hashed and Hierarchical Timing Wheels: Data Structures for the Efficient Implementation of a Timer Facility</a></p>
<p>Yashiro Matsuda最近写了一篇博文<a href="http://www.confluent.io/blog/apache-kafka-purgatory-hierarchical-timing-wheels" target="_blank" rel="noopener">Apache Kafka’s use of Hierarchical Timing Wheels</a> 用于监控大量的延时操作。 在Kafka用例中，每个请求都处于“Purgatory”数据结构中，并且与事件驱动处理的超时计时器和观察者列表图相关联。 有效跟踪到期定时器是一个常见问题。 这个原则可以适用于任何跟踪未完成的请求或延时消息系统。</p>
<p>今天的选择是Varghese和Lauck在1987年发表的一篇论文，他们在这篇论文中研究了一些有效管理定时器的方法，并介绍了Kafka所使用的分层定时轮的概念。 他们将定时器建模为两个面向用户的操作，即启动和停止，以及两个内部操作：每个滴答步进和过期处理。</p>
<ul>
<li><p>启动计时器由客户端调用，指定一个计时器持续时间和一个回调。在作者的模型中，客户端还传入一个请求ID来区分计时器，但是现在我们更倾向于返回一个计时器ID来响应启动计时器的请求。</p>
</li>
<li><p>停止定时器接收一个请求（定时器）ID，并找到并停止（删除）相关的定时器。</p>
</li>
<li><p>在计时器时钟的每个“滴答声”上都会发生清算。如果设置定时器的粒度单位是T个单位时间（例如1秒），则每T个单位时间将发生一个清算。它检查是否有任何未完成的定时器已经过期，如果是则删除它们并调用过期处理。</p>
</li>
<li><p>到期处理负责调用用户提供的回调（或其他用户请求的操作，具体取决于您的模型）。</p>
</li>
</ul>
<p>不同的数据结构和算法在执行这些操作的成本方面有不同的复杂性（例如，启动一个定时器是一个恒定的时间操作，取决于现有定时器的数量，或者甚至是一些其他变量？）。 我们有七种不同的计时器管理方案，指导方针是“对于一个普通的定时器模块，这个模块预计在各种环境下都能正常工作，我们推荐方案6或7”。方案6是“散列定时轮”和方案7是“分层定时轮”。</p></div><p class="readmore"><a href="/2017/11/15/hashed-and-hierarchical-timing-wheels/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/09/11/problem-analysis-of-nginx-session-sticky/">Nginx_Session_Sticky踩坑记录</a></h1><div class="post-meta">2017-09-11</div><div class="post-content"><h1 id="常见Session方案"><a href="#常见Session方案" class="headerlink" title="常见Session方案"></a>常见Session方案</h1><p>一个多用户的WEB系统一定离不开多用户的登录和会话保持的问题，用户登录可以通过SSO单点登录解决，但是用户的SESSION会话保持是需要一个基础设施来支撑的。对于传统的单机部署的WEB应用，SESSION会话由本机的应用服务器（tomcat/jetty/jboss）负责应用SESSION会话的保持。但是对于分布式部署的WEB应用来说，单机的会话保持显然并不能适用在这种场景下面，下面是分布式WEB应用场景时一般采取的策略：</p>
<ul>
<li>方案一：通过前端负载均衡进行SESSION_STICKY</li>
<li>方案二：应用服务器层SESSION同步</li>
<li>方案三：应用SESSION层统一管理</li>
</ul></div><p class="readmore"><a href="/2017/09/11/problem-analysis-of-nginx-session-sticky/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/09/07/leetcode-3-longest-substring-without-repeating-characters/">leetcode算法3_最长无重复子串长度</a></h1><div class="post-meta">2017-09-07</div><div class="post-content"><h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><blockquote>
<p>给定一个字符串，找到最长子串的长度，而不重复字符。</p>
</blockquote>
<h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>给定“abcabcbb”，答案是“abc”，长度为3。</p>
<p>给定“bbbbb”，答案是“b”，长度为1。</p>
<p>给定“pwwkew”，答案是“wke”，长度为3.请注意，答案必须是子字符串，“pwke”是子序列而不是子字符串。</p></div><p class="readmore"><a href="/2017/09/07/leetcode-3-longest-substring-without-repeating-characters/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/09/07/leetcode-4-median-of-two-sorted-arrays/">leetcode算法4_两排序数组求中位平均数</a></h1><div class="post-meta">2017-09-07</div><div class="post-content"><h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p>有两个排序的数组nums1和nums2分别为m和n大小。</p>
<p>找到两个排序数组的中位数。 整体运行时间复杂度应为O（log（m + n））。</p>
<p>示例1：<br>nums1 = [1,3]<br>nums2 = [2]</p>
<p>中位数为2.0<br>示例2：<br>nums1 = [1,2]<br>nums2 = [3,4]</p>
<p>中位数为（2 + 3）/ 2 = 2.5</p></div><p class="readmore"><a href="/2017/09/07/leetcode-4-median-of-two-sorted-arrays/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/09/06/leetcode-2-add-two-numbers/">leetcode算法题2_两数相加</a></h1><div class="post-meta">2017-09-06</div><div class="post-content"><p>给定两个非空的链表，表示两个非负整数。 数字以相反的顺序存储，每个节点包含一个数字。 添加两个数字并将其作为链表返回。</p>
<p>您可以假设两个数字不包含任何前导零，除了数字0本身。</p></div><p class="readmore"><a href="/2017/09/06/leetcode-2-add-two-numbers/">阅读全文</a></p></div><div class="post"><h1 class="post-title"><a href="/2017/09/06/leetcode-two-sum-part-2/">leetcode算法题167_两数之和（II）</a></h1><div class="post-meta">2017-09-06</div><div class="post-content"><p>给定一个已经按升序排序的整数数组，找到两个数字，使它们相加到一个特定的目标数。</p>
<p>函数twoSum应该返回两个数字的索引，使它们相加到目标，其中index1必须小于index2。 请注意，您返回的答案（index1和index2）都不是基于零的。</p>
<p>您可以假设每个输入都将具有一个解决方案，您可能不会使用相同的元素两次。</p>
<p>输入：numbers = {2，7，11，15}，target = 9<br>输出：index1 = 1，index2 = 2</p></div><p class="readmore"><a href="/2017/09/06/leetcode-two-sum-part-2/">阅读全文</a></p></div><nav class="page-navigator"><a class="extend prev" rel="prev" href="/">上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/">下一页</a></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.lpnote.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/原创文章/">原创文章</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/原创文章/问题记录/">问题记录</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/翻译文章/">翻译文章</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载文章/">转载文章</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/问题记录/">问题记录</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/问题解析/" style="font-size: 15px;">问题解析</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/apache/" style="font-size: 15px;">apache</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/fastjson/" style="font-size: 15px;">fastjson</a> <a href="/tags/ranger/" style="font-size: 15px;">ranger</a> <a href="/tags/hdfs/" style="font-size: 15px;">hdfs</a> <a href="/tags/大数据/" style="font-size: 15px;">大数据</a> <a href="/tags/最佳实践/" style="font-size: 15px;">最佳实践</a> <a href="/tags/hortonworks/" style="font-size: 15px;">hortonworks</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/groovy/" style="font-size: 15px;">groovy</a> <a href="/tags/正则表达式/" style="font-size: 15px;">正则表达式</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/配置中心/" style="font-size: 15px;">配置中心</a> <a href="/tags/DIY/" style="font-size: 15px;">DIY</a> <a href="/tags/HIVE/" style="font-size: 15px;">HIVE</a> <a href="/tags/搜索引擎/" style="font-size: 15px;">搜索引擎</a> <a href="/tags/lucene/" style="font-size: 15px;">lucene</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/IDE/" style="font-size: 15px;">IDE</a> <a href="/tags/IDEA/" style="font-size: 15px;">IDEA</a> <a href="/tags/json/" style="font-size: 15px;">json</a> <a href="/tags/jackson/" style="font-size: 15px;">jackson</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/源码解读/" style="font-size: 15px;">源码解读</a> <a href="/tags/基础问题/" style="font-size: 15px;">基础问题</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/centos/" style="font-size: 15px;">centos</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/ORM/" style="font-size: 15px;">ORM</a> <a href="/tags/负载均衡/" style="font-size: 15px;">负载均衡</a> <a href="/tags/guava/" style="font-size: 15px;">guava</a> <a href="/tags/踩坑/" style="font-size: 15px;">踩坑</a> <a href="/tags/session/" style="font-size: 15px;">session</a> <a href="/tags/druid/" style="font-size: 15px;">druid</a> <a href="/tags/rpm/" style="font-size: 15px;">rpm</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/jetty/" style="font-size: 15px;">jetty</a> <a href="/tags/gc/" style="font-size: 15px;">gc</a> <a href="/tags/presto/" style="font-size: 15px;">presto</a> <a href="/tags/OOM/" style="font-size: 15px;">OOM</a> <a href="/tags/GC/" style="font-size: 15px;">GC</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/版本控制/" style="font-size: 15px;">版本控制</a> <a href="/tags/VCS/" style="font-size: 15px;">VCS</a> <a href="/tags/分支管理/" style="font-size: 15px;">分支管理</a> <a href="/tags/virtualbox/" style="font-size: 15px;">virtualbox</a> <a href="/tags/ubuntu/" style="font-size: 15px;">ubuntu</a> <a href="/tags/timewheels/" style="font-size: 15px;">timewheels</a> <a href="/tags/timer/" style="font-size: 15px;">timer</a> <a href="/tags/yarn/" style="font-size: 15px;">yarn</a> <a href="/tags/SpringCloud/" style="font-size: 15px;">SpringCloud</a> <a href="/tags/微服务/" style="font-size: 15px;">微服务</a> <a href="/tags/metrics/" style="font-size: 15px;">metrics</a> <a href="/tags/ambari/" style="font-size: 15px;">ambari</a> <a href="/tags/参与开源/" style="font-size: 15px;">参与开源</a> <a href="/tags/timewheel/" style="font-size: 15px;">timewheel</a> <a href="/tags/skywalking/" style="font-size: 15px;">skywalking</a> <a href="/tags/apm/" style="font-size: 15px;">apm</a> <a href="/tags/SQL/" style="font-size: 15px;">SQL</a> <a href="/tags/solr/" style="font-size: 15px;">solr</a> <a href="/tags/rocketmq/" style="font-size: 15px;">rocketmq</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a> <a href="/tags/问题分析/" style="font-size: 15px;">问题分析</a> <a href="/tags/github/" style="font-size: 15px;">github</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/02/13/ignore_above-in-elasticsearch/">Elasticsearch中ignore_above的作用</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/02/java-concurrent-striped64/">java并发之Striped64解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/memory-leak-analysis-for-skywalking/">一次Skywalking内存泄露的原因分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/write-combining/">合并写(write combining)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/31/false-sharing/">伪共享(False Sharing)</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/08/groovy-expr-usage/">groovy-expr-usage</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/08/jackson-ctrl-char-problem-resovle/">jackson-ctrl-char-problem-resovle</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/04/solve-a-disk-warning-illusion-caused-by-rocketmq/">solve-a-disk-warning-illusion-caused-by-rocketmq</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/30/hexoclient-usage/">hexoclient-usage</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/23/customize-instance-id-with-consul-service-registry/">定制springcloud服务注册到consul中的instanceId</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">LP's Notes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo. </a><a rel="nofollow" target="_blank" href="https://coding.net">Hosted by Coding Pages.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>